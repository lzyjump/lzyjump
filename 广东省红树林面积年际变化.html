<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ECharts图表</title>
    <!-- 引入ECharts库 - 使用稳定的CDN -->
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }
        #container {
            width: 100%;
            height: 100%;
            min-height: 400px; /* 确保有最小高度 */
        }
        .error-message {
            color: red;
            padding: 20px;
            display: none;
        }
    </style>
</head>
<body>
    <div id="container"></div>
    <div class="error-message" id="errorMsg"></div>

    <script>
        // 增加错误处理
        try {
            // 检查ECharts是否加载成功
            if (typeof echarts === 'undefined') {
                throw new Error('ECharts库未加载成功，请检查网络或引用地址');
            }

            var dom = document.getElementById('container');
            if (!dom) {
                throw new Error('未找到容器元素');
            }

            var myChart = echarts.init(dom, null, {
                renderer: 'canvas',
                useDirtyRect: false
            });

            var option = {
                xAxis: {
                    type: 'category',
                    data: ['1985', '1990', '1995', '2000', '2005', '2010', '2015','2020','2025']
                },
                yAxis: {
                    name: '公顷(hm²)',
                    type: 'value'
                },
                series: [
                    {
                        data: [8249.73, 6657.42, 9576.33, 9326.72, 12330.42, 13215.65, 11325.56, 11895.56, 11405.07],
                        type: 'line',
                        smooth: true
                    }
                ]
            };

            if (option && typeof option === 'object') {
                myChart.setOption(option);
            }

            // 优化 resize 事件处理
            window.addEventListener('resize', function() {
                if (myChart && typeof myChart.resize === 'function') {
                    myChart.resize();
                }
            });

            console.log('图表初始化成功');
        } catch (error) {
            console.error('图表加载失败:', error);
            // 显示错误信息给用户
            document.getElementById('errorMsg').textContent = '图表加载失败: ' + error.message;
            document.getElementById('errorMsg').style.display = 'block';
        }
    </script>
</body>
</html>
